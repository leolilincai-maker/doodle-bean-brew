<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è±†è±†è°· - å¥åº·æ—¶å°šè±†ç±»é¥®å“</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <nav class="container">
            <a href="index.html" class="logo">
                <img src="images/logo.jpg" alt="è±†è±†è°· Doodle Bean Brew">
            </a>
            <ul class="nav-links">
                <li><a href="index.html" class="active">é¦–é¡µ</a></li>
                <li><a href="products.html">äº§å“ä»‹ç»</a></li>
                <li><a href="ingredients.html">åŸæ–™ä»‹ç»</a></li>
                <li><a href="contact.html">è”ç³»æˆ‘ä»¬</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>è±†è±†è°·</h1>
                    <p>å°†ä¼ ç»Ÿè±†ç±»çš„è¥å…»ä¸æ—¶å°šèŠ±å‰çš„ç¾ä¸½å®Œç¾èåˆï¼Œ<br>ä¸ºæ‚¨å¸¦æ¥å¥åº·ã€ç¾å‘³ã€é¢œå€¼å¹¶å­˜çš„å…¨æ–°é¥®å“ä½“éªŒ</p>
                    <a href="products.html" class="cta-button">æ¢ç´¢æˆ‘ä»¬çš„é¥®å“</a>
                </div>
            </div>
        </section>

        <section class="section bg-pattern">
            <div class="container">
                <h2 class="section-title">ä¸ºä»€ä¹ˆé€‰æ‹©è±†è±†è°·</h2>
                <div class="cards-grid">
                    <div class="card fade-in">
                        <span class="card-icon">ğŸŒ±</span>
                        <h3>å¤©ç„¶å¥åº·</h3>
                        <p>ç²¾é€‰ä¼˜è´¨è±†ç±»åŸæ–™ï¼Œå¯Œå«æ¤ç‰©è›‹ç™½å’Œå¤šç§ç»´ç”Ÿç´ ï¼Œæ— æ·»åŠ å‰‚ï¼Œçº¯å¤©ç„¶åˆ¶ä½œï¼Œä¸ºæ‚¨çš„å¥åº·ä¿é©¾æŠ¤èˆªã€‚</p>
                    </div>
                    <div class="card fade-in">
                        <span class="card-icon">ğŸŒ¸</span>
                        <h3>æ—¶å°šç¾å­¦</h3>
                        <p>èå…¥ç²¾å¿ƒæŒ‘é€‰çš„é£Ÿç”¨èŠ±å‰ï¼Œä¸ä»…å¢æ·»è§†è§‰ç¾æ„Ÿï¼Œæ›´ä¸°å¯Œäº†é¥®å“çš„å±‚æ¬¡æ„Ÿå’Œç‹¬ç‰¹é¦™æ°”ã€‚</p>
                    </div>
                    <div class="card fade-in">
                        <span class="card-icon">âš¡</span>
                        <h3>è¥å…»åŠŸæ•ˆ</h3>
                        <p>è±†ç±»ä¸èŠ±å‰çš„å®Œç¾ç»“åˆï¼Œæä¾›å…¨é¢è¥å…»è¡¥å……ï¼Œå…·æœ‰ç¾å®¹å…»é¢œã€æ¸…çƒ­è§£æ¯’ç­‰å¤šé‡åŠŸæ•ˆã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <h2 class="section-title">äººæ°”æ¨è</h2>
                <div class="product-grid">
                    <!-- æ‹›ç‰Œäº§å“ï¼šçº¢ç²‰è±†è¯­ -->
                    <div class="product-card featured">
                        <div class="product-badge">ğŸ† æ‹›ç‰Œæ¨è</div>
                        <div class="product-image">
                            <img src="images/Hongfendouyu.JPG.jpg" alt="çº¢ç²‰è±†è¯­ - è±†è±†è°·æ‹›ç‰Œé¥®å“" class="product-photo">
                        </div>
                        <div class="product-info">
                            <h3 class="product-name">çº¢ç²‰è±†è¯­</h3>
                            <p class="product-description">è±†è±†è°·æ‹›ç‰Œä¹‹ä½œï¼é»„è±†çº¢è±†å®Œç¾èåˆï¼Œç«ç‘°èŠ±ç“£ç‚¹ç¼€ï¼Œæ—¥å¸¸å…ƒæ°”è½»ç›ˆæ³¨å…¥</p>
                            <div class="product-highlights">
                                <span class="highlight">ğŸŒŸ æ‹›ç‰Œç‰¹è°ƒ</span>
                                <span class="highlight">ğŸŒ¹ ç«ç‘°èŠ±ç“£</span>
                            </div>
                            <div class="product-price" id="homeSignaturePrice">S$7.80</div>
                            
                            <!-- äº§å“å®šåˆ¶é€‰é¡¹ -->
                            <div class="product-options">
                                <!-- æ¯å‹é€‰æ‹© -->
                                <div class="option-group">
                                    <label class="option-label">æ¯å‹:</label>
                                    <div class="option-buttons">
                                        <button type="button" class="option-btn" onclick="selectSize('homeSignature', 'large', 7.80)">
                                            å¤§æ¯
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectSize('homeSignature', 'small', 6.80)">
                                            å°æ¯
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- æ¸©åº¦é€‰æ‹© -->
                                <div class="option-group">
                                    <label class="option-label">æ¸©åº¦:</label>
                                    <div class="option-buttons">
                                        <button type="button" class="option-btn" onclick="selectTemperature('homeSignature', 'hot')">
                                            ğŸ”¥ çƒ­é¥®
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectTemperature('homeSignature', 'cold')">
                                            ğŸ§Š å†°é¥®
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- ç³–åˆ†é€‰æ‹© -->
                                <div class="option-group">
                                    <label class="option-label">ç³–åˆ†:</label>
                                    <div class="option-buttons">
                                        <button type="button" class="option-btn" onclick="selectSugar('homeSignature', 'none')">
                                            æ— ç³–
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectSugar('homeSignature', 'half')">
                                            åŠç³–
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectSugar('homeSignature', 'standard')">
                                            æ ‡å‡†ç³–
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- æ•°é‡é€‰æ‹© -->
                            <div class="quantity-selector">
                                <label for="homeSignatureQuantity">æ•°é‡:</label>
                                <div class="quantity-controls">
                                    <button type="button" onclick="changeQuantity('homeSignatureQuantity', -1)">-</button>
                                    <input type="number" id="homeSignatureQuantity" value="1" min="1" max="10" readonly>
                                    <button type="button" onclick="changeQuantity('homeSignatureQuantity', 1)">+</button>
                                </div>
                            </div>
                            
                            <div class="order-buttons">
                                <button class="order-btn cart-btn" onclick="addSignatureToCart('homeSignature')">
                                    ğŸ›’ åŠ å…¥è´­ç‰©è½¦
                                </button>
                                <button class="order-btn whatsapp-btn" onclick="orderSignatureProduct('homeSignature')">
                                    ğŸ“± ç«‹å³è®¢è´­
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- æ–°äº§å“ï¼šæ¡‚èŠ±åŒè±†å¥¶ -->
                    <div class="product-card featured">
                        <div class="product-badge">ğŸŒŸ å…¨æ–°æ¨å‡º</div>
                        <div class="product-image">
                            <img src="images/huangdoulvdouguihua.jpg" alt="æ¡‚èŠ±åŒè±†å¥¶ - é»„è±†ç»¿è±†æ¡‚èŠ±å®Œç¾èåˆ" class="product-photo">
                        </div>
                        <div class="product-info">
                            <h3 class="product-name">æ¡‚èŠ±åŒè±†å¥¶</h3>
                            <p class="product-description">ç²¾é€‰é»„è±†ä¸ç»¿è±†åŒé‡è¥å…»ï¼Œèå…¥å¤©ç„¶æ¡‚èŠ±é¦™ç”œï¼Œå£æ„Ÿé†‡åšï¼Œå±‚æ¬¡ä¸°å¯Œ</p>
                            <div class="product-highlights">
                                <span class="highlight">ğŸŒŸ åŒè±†ç²¾å</span>
                                <span class="highlight">ğŸŒ¼ æ¡‚èŠ±èŠ¬èŠ³</span>
                            </div>
                            <div class="product-price" id="homeGuihuaPrice">S$7.20</div>
                            
                            <!-- äº§å“å®šåˆ¶é€‰é¡¹ -->
                            <div class="product-options">
                                <!-- æ¯å‹é€‰æ‹© -->
                                <div class="option-group">
                                    <label class="option-label">æ¯å‹:</label>
                                    <div class="option-buttons">
                                        <button type="button" class="option-btn" onclick="selectSize('homeGuihua', 'large', 7.20)">
                                            å¤§æ¯
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectSize('homeGuihua', 'small', 6.20)">
                                            å°æ¯
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- æ¸©åº¦é€‰æ‹© -->
                                <div class="option-group">
                                    <label class="option-label">æ¸©åº¦:</label>
                                    <div class="option-buttons">
                                        <button type="button" class="option-btn" onclick="selectTemperature('homeGuihua', 'hot')">
                                            ğŸ”¥ çƒ­é¥®
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectTemperature('homeGuihua', 'cold')">
                                            ğŸ§Š å†°é¥®
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- ç³–åˆ†é€‰æ‹© -->
                                <div class="option-group">
                                    <label class="option-label">ç³–åˆ†:</label>
                                    <div class="option-buttons">
                                        <button type="button" class="option-btn" onclick="selectSugar('homeGuihua', 'none')">
                                            æ— ç³–
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectSugar('homeGuihua', 'half')">
                                            åŠç³–
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectSugar('homeGuihua', 'standard')">
                                            æ ‡å‡†ç³–
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- æ•°é‡é€‰æ‹© -->
                            <div class="quantity-selector">
                                <label for="homeGuihuaQuantity">æ•°é‡:</label>
                                <div class="quantity-controls">
                                    <button type="button" onclick="changeQuantity('homeGuihuaQuantity', -1)">-</button>
                                    <input type="number" id="homeGuihuaQuantity" value="1" min="1" max="10" readonly>
                                    <button type="button" onclick="changeQuantity('homeGuihuaQuantity', 1)">+</button>
                                </div>
                            </div>
                            
                            <div class="order-buttons">
                                <button class="order-btn cart-btn" onclick="addSignatureToCart('homeGuihua')">
                                    ğŸ›’ åŠ å…¥è´­ç‰©è½¦
                                </button>
                                <button class="order-btn whatsapp-btn" onclick="orderSignatureProduct('homeGuihua')">
                                    ğŸ“± ç«‹å³è®¢è´­
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- æ–°äº§å“ï¼šæ´›ç¥å››å®é¥® -->
                    <div class="product-card featured">
                        <div class="product-badge">ğŸŒŸ å…¨æ–°æ¨å‡º</div>
                        <div class="product-image">
                            <img src="images/heidouhongdouluoshenhuahongzao.jpg" alt="æ´›ç¥å››å®é¥® - é»‘è±†çº¢è±†æ´›ç¥èŠ±çº¢æ£å…»é¢œä½³å“" class="product-photo">
                        </div>
                        <div class="product-info">
                            <h3 class="product-name">æ´›ç¥å››å®é¥®</h3>
                            <p class="product-description">çè´µå››é‡é…æ–¹ï¼šé»‘è±†çº¢è±†åŒè±†è¥å…»ï¼Œæ´›ç¥èŠ±é…¸ç”œå›ç”˜ï¼Œçº¢æ£æ¸©æ¶¦è¡¥è¡€ï¼Œå…»é¢œç¾å®¹åœ£å“</p>
                            <div class="product-highlights">
                                <span class="highlight">ğŸ’– ç¾é¢œåœ£å“</span>
                                <span class="highlight">ğŸŒº æ´›ç¥èŠ±é¦™</span>
                                <span class="highlight">ğŸ”¥ å››å®ç²¾å</span>
                            </div>
                            <div class="product-price" id="homeLuoshenPrice">S$8.50</div>
                            
                            <!-- äº§å“å®šåˆ¶é€‰é¡¹ -->
                            <div class="product-options">
                                <!-- æ¯å‹é€‰æ‹© -->
                                <div class="option-group">
                                    <label class="option-label">æ¯å‹:</label>
                                    <div class="option-buttons">
                                        <button type="button" class="option-btn" onclick="selectSize('homeLuoshen', 'large', 8.50)">
                                            å¤§æ¯
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectSize('homeLuoshen', 'small', 7.50)">
                                            å°æ¯
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- æ¸©åº¦é€‰æ‹© -->
                                <div class="option-group">
                                    <label class="option-label">æ¸©åº¦:</label>
                                    <div class="option-buttons">
                                        <button type="button" class="option-btn" onclick="selectTemperature('homeLuoshen', 'hot')">
                                            ğŸ”¥ çƒ­é¥®
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectTemperature('homeLuoshen', 'cold')">
                                            ğŸ§Š å†°é¥®
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- ç³–åˆ†é€‰æ‹© -->
                                <div class="option-group">
                                    <label class="option-label">ç³–åˆ†:</label>
                                    <div class="option-buttons">
                                        <button type="button" class="option-btn" onclick="selectSugar('homeLuoshen', 'none')">
                                            æ— ç³–
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectSugar('homeLuoshen', 'half')">
                                            åŠç³–
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectSugar('homeLuoshen', 'standard')">
                                            æ ‡å‡†ç³–
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- æ•°é‡é€‰æ‹© -->
                            <div class="quantity-selector">
                                <label for="homeLuoshenQuantity">æ•°é‡:</label>
                                <div class="quantity-controls">
                                    <button type="button" onclick="changeQuantity('homeLuoshenQuantity', -1)">-</button>
                                    <input type="number" id="homeLuoshenQuantity" value="1" min="1" max="10" readonly>
                                    <button type="button" onclick="changeQuantity('homeLuoshenQuantity', 1)">+</button>
                                </div>
                            </div>
                            
                            <div class="order-buttons">
                                <button class="order-btn cart-btn" onclick="addSignatureToCart('homeLuoshen')">
                                    ğŸ›’ åŠ å…¥è´­ç‰©è½¦
                                </button>
                                <button class="order-btn whatsapp-btn" onclick="orderSignatureProduct('homeLuoshen')">
                                    ğŸ“± ç«‹å³è®¢è´­
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- æ–°äº§å“ï¼šèŒ‰è‰åŒè±†è¯­ -->
                    <div class="product-card featured">
                        <div class="product-badge">ğŸŒŸ å…¨æ–°æ¨å‡º</div>
                        <div class="product-image">
                            <img src="images/heidoulvdoumolihua.jpg" alt="èŒ‰è‰åŒè±†è¯­ - é»‘è±†ç»¿è±†èŒ‰è‰èŠ±æ¸…é¦™èåˆ" class="product-photo">
                        </div>
                        <div class="product-info">
                            <h3 class="product-name">èŒ‰è‰åŒè±†è¯­</h3>
                            <p class="product-description">é»‘è±†ä¸ç»¿è±†çš„è¥å…»åŒé‡å¥ï¼Œé…ä»¥æ¸…é¦™èŒ‰è‰èŠ±ï¼Œå£æ„Ÿæ¸…æ–°æ·¡é›…ï¼Œå…·æœ‰æ¸…çƒ­è§£æ¯’åŠŸæ•ˆ</p>
                            <div class="product-highlights">
                                <span class="highlight">ğŸŒ¿ æ¸…çƒ­è§£æ¯’</span>
                                <span class="highlight">ğŸŒ¸ èŒ‰è‰æ¸…é¦™</span>
                            </div>
                            <div class="product-price" id="homeMoliPrice">S$6.80</div>
                            
                            <!-- äº§å“å®šåˆ¶é€‰é¡¹ -->
                            <div class="product-options">
                                <!-- æ¯å‹é€‰æ‹© -->
                                <div class="option-group">
                                    <label class="option-label">æ¯å‹:</label>
                                    <div class="option-buttons">
                                        <button type="button" class="option-btn" onclick="selectSize('homeMoli', 'large', 6.80)">
                                            å¤§æ¯
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectSize('homeMoli', 'small', 5.80)">
                                            å°æ¯
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- æ¸©åº¦é€‰æ‹© -->
                                <div class="option-group">
                                    <label class="option-label">æ¸©åº¦:</label>
                                    <div class="option-buttons">
                                        <button type="button" class="option-btn" onclick="selectTemperature('homeMoli', 'hot')">
                                            ğŸ”¥ çƒ­é¥®
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectTemperature('homeMoli', 'cold')">
                                            ğŸ§Š å†°é¥®
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- ç³–åˆ†é€‰æ‹© -->
                                <div class="option-group">
                                    <label class="option-label">ç³–åˆ†:</label>
                                    <div class="option-buttons">
                                        <button type="button" class="option-btn" onclick="selectSugar('homeMoli', 'none')">
                                            æ— ç³–
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectSugar('homeMoli', 'half')">
                                            åŠç³–
                                        </button>
                                        <button type="button" class="option-btn" onclick="selectSugar('homeMoli', 'standard')">
                                            æ ‡å‡†ç³–
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- æ•°é‡é€‰æ‹© -->
                            <div class="quantity-selector">
                                <label for="homeMoliQuantity">æ•°é‡:</label>
                                <div class="quantity-controls">
                                    <button type="button" onclick="changeQuantity('homeMoliQuantity', -1)">-</button>
                                    <input type="number" id="homeMoliQuantity" value="1" min="1" max="10" readonly>
                                    <button type="button" onclick="changeQuantity('homeMoliQuantity', 1)">+</button>
                                </div>
                            </div>
                            
                            <div class="order-buttons">
                                <button class="order-btn cart-btn" onclick="addSignatureToCart('homeMoli')">
                                    ğŸ›’ åŠ å…¥è´­ç‰©è½¦
                                </button>
                                <button class="order-btn whatsapp-btn" onclick="orderSignatureProduct('homeMoli')">
                                    ğŸ“± ç«‹å³è®¢è´­
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 2rem;">
                    <a href="products.html" class="cta-button">æŸ¥çœ‹å…¨éƒ¨äº§å“ View All Products</a>
                </div>
            </div>
        </section>

        <section class="section bg-pattern">
            <div class="container">
                <h2 class="section-title">å®¢æˆ·å¥½è¯„</h2>
                <div class="cards-grid">
                    <div class="card">
                        <span class="card-icon">â­â­â­â­â­</span>
                        <h3>å°é›…åŒå­¦</h3>
                        <p>"æ¡‚èŠ±é»„è±†å¥¶èŒ¶çœŸçš„å¤ªæ£’äº†ï¼æ—¢æœ‰ä¼ ç»Ÿè±†æµ†çš„è¥å…»ï¼Œåˆæœ‰æ¡‚èŠ±çš„é¦™ç”œï¼Œå…³é”®æ˜¯é¢œå€¼è¶…é«˜ï¼"</p>
                    </div>
                    <div class="card">
                        <span class="card-icon">â­â­â­â­â­</span>
                        <h3>å¥èº«è¾¾äººMark</h3>
                        <p>"ä½œä¸ºå¥èº«çˆ±å¥½è€…ï¼Œæˆ‘ç‰¹åˆ«å–œæ¬¢è¿™é‡Œçš„è›‹ç™½è´¨å«é‡ä¸°å¯Œçš„è±†ç±»é¥®å“ï¼Œå®Œå…¨ä¸ç”¨æ‹…å¿ƒçƒ­é‡é—®é¢˜ï¼"</p>
                    </div>
                    <div class="card">
                        <span class="card-icon">â­â­â­â­â­</span>
                        <h3>å¦ˆå¦ˆç”¨æˆ·æå¥³å£«</h3>
                        <p>"å­©å­ç‰¹åˆ«å–œæ¬¢è¿™é‡Œçš„é¥®å“ï¼Œå¤©ç„¶æ— æ·»åŠ è®©æˆ‘å¾ˆæ”¾å¿ƒï¼ŒèŠ±å‰çš„åŠ å…¥è®©è¥å…»æ›´å…¨é¢ï¼"</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- è´­ç‰©è½¦æ‚¬æµ®å›¾æ ‡ -->
    <div id="cartFloat" class="cart-float" onclick="openCart()">
        <div class="cart-icon">ğŸ›’</div>
        <div id="cartCount" class="cart-count">0</div>
        <div id="cartTotal" class="cart-total">S$0.00</div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div>
                    <p>&copy; 2024 è±†è±†è°· Doodle Bean Brew. ä¿ç•™æ‰€æœ‰æƒåˆ©</p>
                </div>
                <div class="social-links">
                    <a href="#" title="å¾®ä¿¡">ğŸ“±</a>
                    <a href="#" title="å¾®åš">ğŸ¦</a>
                    <a href="#" title="å°çº¢ä¹¦">ğŸ“–</a>
                    <a href="#" title="æŠ–éŸ³">ğŸµ</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // ==================== è´­ç‰©è½¦ç³»ç»Ÿ ====================
        
        // å…¨å±€å˜é‡
        let cart = JSON.parse(localStorage.getItem('doodleCart')) || [];
        let currentOrderData = null; // è´­ç‰©è½¦è®¢å•æ•°æ®
        let currentPaymentData = null; // å½“å‰æ”¯ä»˜è®¢å•æ•°æ®
        
        // åˆå§‹åŒ–è´­ç‰©è½¦æ˜¾ç¤º
        function initCart() {
            updateCartDisplay();
        }
        
        // æ•°é‡æ§åˆ¶
        function changeQuantity(inputId, change) {
            const input = document.getElementById(inputId);
            let currentValue = parseInt(input.value);
            let newValue = currentValue + change;
            
            if (newValue >= 1 && newValue <= 10) {
                input.value = newValue;
            }
        }
        
        // æ·»åŠ åˆ°è´­ç‰©è½¦
        function addToCart(name, price, emoji, quantityId) {
            const quantity = parseInt(document.getElementById(quantityId).value);
            const priceNum = parseFloat(price.replace('S$', ''));
            
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒäº§å“
            const existingItem = cart.find(item => item.name === name);
            
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({
                    name: name,
                    price: priceNum,
                    emoji: emoji,
                    quantity: quantity
                });
            }
            
            // ä¿å­˜åˆ°localStorage
            localStorage.setItem('doodleCart', JSON.stringify(cart));
            
            // æ›´æ–°æ˜¾ç¤º
            updateCartDisplay();
            
            // é‡ç½®æ•°é‡ä¸º1
            document.getElementById(quantityId).value = 1;
            
            // æ˜¾ç¤ºæ·»åŠ æˆåŠŸæç¤º
            showAddToCartSuccess(name, quantity);
        }
        
        // æ˜¾ç¤ºæ·»åŠ æˆåŠŸæç¤º
        function showAddToCartSuccess(name, quantity) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--primary-color);
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 10px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                z-index: 10001;
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            
            toast.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 1.2rem;">âœ…</span>
                    <div>
                        <div style="font-weight: bold;">${name}</div>
                        <div style="font-size: 0.9rem;">å·²æ·»åŠ  ${quantity} ä»½åˆ°è´­ç‰©è½¦</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // åŠ¨ç”»æ˜¾ç¤º
            setTimeout(() => {
                toast.style.transform = 'translateX(0)';
            }, 100);
            
            // 3ç§’åç§»é™¤
            setTimeout(() => {
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }
        
        // æ›´æ–°è´­ç‰©è½¦æ˜¾ç¤º
        function updateCartDisplay() {
            const cartCount = document.getElementById('cartCount');
            const cartTotal = document.getElementById('cartTotal');
            const cartFloat = document.getElementById('cartFloat');
            
            if (cart.length === 0) {
                cartCount.textContent = '0';
                cartTotal.textContent = 'S$0.00';
                cartFloat.style.display = 'none';
                return;
            }
            
            // è®¡ç®—æ€»æ•°é‡å’Œæ€»ä»·
            const totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);
            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            cartCount.textContent = totalQuantity;
            cartTotal.textContent = `S$${totalPrice.toFixed(2)}`;
            cartFloat.style.display = 'flex';
        }
        
        // æ‰“å¼€è´­ç‰©è½¦ï¼ˆè·³è½¬åˆ°äº§å“é¡µé¢ï¼‰
        function openCart() {
            window.location.href = 'products.html';
        }

        // ==================== åŸæœ‰åŠŸèƒ½ä¿æŒä¸å˜ ====================
        
        // WhatsAppéšæœºåˆ†é…ç³»ç»Ÿ
        const whatsappNumbers = [
            '6591012399',  // ç”¨æˆ·æœ¬äºº
            '6583009375'   // åˆä¼™äºº
        ];

        // é…é€åŒºåŸŸå®šä¹‰
        const deliveryAreas = {
            westTerra: {
                name: 'West Terra @ Bukit Batok',
                blocks: ['447', '448', '449', '450', '451', '452', '453'],
                address: 'Bukit Batok West Avenue'
            },
            leQuest: {
                name: 'Le Questå…¬å¯“',
                address: 'Bukit Batok West Avenue 6'
            }
        };

        function getRandomWhatsApp() {
            const randomIndex = Math.floor(Math.random() * whatsappNumbers.length);
            return whatsappNumbers[randomIndex];
        }

        function openWhatsAppChat(message) {
            const selectedNumber = getRandomWhatsApp();
            const whatsappUrl = `https://wa.me/${selectedNumber}?text=${encodeURIComponent(message)}`;
            
            // ç§»åŠ¨ç«¯å…¼å®¹æ€§å¤„ç†
            if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                // ç§»åŠ¨ç«¯ç›´æ¥è·³è½¬ï¼Œé¿å…window.opené—®é¢˜
                window.location.href = whatsappUrl;
            } else {
                // æ¡Œé¢ç«¯ä½¿ç”¨æ–°çª—å£
                window.open(whatsappUrl, '_blank');
            }
        }

        // å¯åŠ¨é…é€åœ°å€éªŒè¯æµç¨‹
        function startDeliveryVerification(platform, productName = '', productPrice = '') {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                backdrop-filter: blur(5px);
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: white;
                padding: 2rem;
                border-radius: 20px;
                max-width: 500px;
                width: 90%;
                text-align: center;
                box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                position: relative;
            `;
            
            content.innerHTML = `
                <h3 style="color: #6B8E7B; margin-bottom: 1.5rem;">ğŸšš é…é€åœ°å€éªŒè¯</h3>
                
                <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; margin-bottom: 1.5rem; text-align: left;">
                    <h4 style="color: #333; margin-bottom: 1rem;">âœ… å…è´¹é…é€åŒºåŸŸï¼š</h4>
                    <div style="margin-bottom: 1rem;">
                        <strong>ğŸ  West Terra @ Bukit Batok</strong><br>
                        <span style="color: #666;">Block 447, 448, 449, 450, 451, 452, 453</span><br>
                        <span style="color: #666;">Bukit Batok West Avenue 2/5</span>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <strong>ğŸ¢ Le Questå…¬å¯“</strong><br>
                        <span style="color: #666;">Bukit Batok West Avenue 6</span>
                    </div>
                    <div style="color: #E76F51; font-weight: bold;">
                        ğŸšš é…é€è´¹ç”¨ï¼šå®Œå…¨å…è´¹<br>
                        â° é…é€æ—¶é—´ï¼š30-60åˆ†é’Ÿ
                    </div>
                </div>
                
                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: bold; color: #333;">è¯·é€‰æ‹©æ‚¨çš„åœ°å€ï¼š</label>
                    <select id="addressSelect" style="width: 100%; padding: 0.8rem; border: 2px solid #6B8E7B; border-radius: 10px; font-size: 1rem;">
                        <option value="">è¯·é€‰æ‹©æ‚¨çš„å…·ä½“åœ°å€...</option>
                        <optgroup label="ğŸ  West Terra @ Bukit Batok">
                            <option value="447">Block 447 Bukit Batok West Avenue</option>
                            <option value="448">Block 448 Bukit Batok West Avenue</option>
                            <option value="449">Block 449 Bukit Batok West Avenue</option>
                            <option value="450">Block 450 Bukit Batok West Avenue</option>
                            <option value="451">Block 451 Bukit Batok West Avenue</option>
                            <option value="452">Block 452 Bukit Batok West Avenue</option>
                            <option value="453">Block 453 Bukit Batok West Avenue</option>
                        </optgroup>
                        <optgroup label="ğŸ¢ Le Questå…¬å¯“">
                            <option value="lequest">Le Quest, Bukit Batok West Avenue 6</option>
                        </optgroup>
                        <option value="other">æˆ‘çš„åœ°å€ä¸åœ¨ä¸Šè¿°èŒƒå›´å†…</option>
                    </select>
                </div>
                
                <div style="display: flex; gap: 1rem; justify-content: center;">
                    <button onclick="processAddressSelection('${platform}', '${productName}', '${productPrice}')" 
                            style="background: #6B8E7B; color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 25px; cursor: pointer; font-weight: bold;">
                        ç¡®è®¤è®¢è´­
                    </button>
                    <button onclick="closeAddressModal()" 
                            style="background: #ccc; color: #333; border: none; padding: 0.8rem 1.5rem; border-radius: 25px; cursor: pointer;">
                        å–æ¶ˆ
                    </button>
                </div>
                
                <button onclick="closeAddressModal()" style="
                    position: absolute;
                    top: 15px;
                    right: 15px;
                    background: none;
                    border: none;
                    font-size: 1.5rem;
                    cursor: pointer;
                    color: #999;
                ">âœ•</button>
            `;
            
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // ç‚¹å‡»èƒŒæ™¯å…³é—­
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeAddressModal();
                }
            });
        }

        // å¤„ç†åœ°å€é€‰æ‹©
        function processAddressSelection(platform, productName, productPrice) {
            const addressSelect = document.getElementById('addressSelect');
            const selectedAddress = addressSelect.value;
            const selectedText = addressSelect.options[addressSelect.selectedIndex].text;
            
            if (!selectedAddress) {
                alert('è¯·é€‰æ‹©æ‚¨çš„é…é€åœ°å€');
                return;
            }
            
            if (selectedAddress === 'other') {
                alert('å¾ˆæŠ±æ­‰ï¼Œæ‚¨çš„åœ°å€æš‚æ—¶ä¸åœ¨æˆ‘ä»¬çš„é…é€èŒƒå›´å†…ã€‚\n\næˆ‘ä»¬ç›®å‰åªæœåŠ¡ï¼š\nâ€¢ West Terra @ Bukit Batok (Block 447-453)\nâ€¢ Le Questå…¬å¯“\n\næ„Ÿè°¢æ‚¨çš„ç†è§£ï¼');
                return;
            }
            
            closeAddressModal();
            
            // åˆ›å»ºè®¢å•æ•°æ®å¹¶è·³è½¬åˆ°æ”¯ä»˜é€‰æ‹©
            const orderData = {
                platform: platform,
                productName: productName,
                productPrice: productPrice,
                address: selectedText,
                isCart: false
            };
            
            showPaymentSelection(orderData);
        }

        // å…³é—­åœ°å€éªŒè¯æ¨¡æ€æ¡†
        function closeAddressModal() {
            const modal = document.querySelector('div[style*="position: fixed"][style*="z-index: 10000"]');
            if (modal) {
                modal.remove();
            }
        }
        
        // ==================== æ”¯ä»˜æ–¹å¼é€‰æ‹©ç³»ç»Ÿ ====================
        
        // æ˜¾ç¤ºæ”¯ä»˜æ–¹å¼é€‰æ‹©
        function showPaymentSelection(orderData) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                backdrop-filter: blur(5px);
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: white;
                padding: 2rem;
                border-radius: 20px;
                max-width: 500px;
                width: 90%;
                text-align: center;
                box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                position: relative;
                max-height: 80vh;
                overflow-y: auto;
            `;
            
            // ç”Ÿæˆè®¢å•æ‘˜è¦ï¼ˆé¦–é¡µä¸»è¦æ˜¯å•å“è®¢è´­ï¼‰
            let orderSummary = `
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 10px; margin-bottom: 1.5rem;">
                    <h4 style="color: #333; margin-bottom: 0.5rem;">ğŸ“‹ è®¢å•è¯¦æƒ…ï¼š</h4>
                    <div style="font-weight: bold; color: var(--accent-color);">
                        ${orderData.productName} - ${orderData.productPrice}
                    </div>
                </div>
            `;
            
            content.innerHTML = `
                <h3 style="color: #6B8E7B; margin-bottom: 1rem;">ğŸ’³ é€‰æ‹©æ”¯ä»˜æ–¹å¼</h3>
                
                ${orderSummary}
                
                <div style="background: #e8f5e8; padding: 1rem; border-radius: 10px; margin-bottom: 1.5rem; text-align: left;">
                    <div style="color: #6B8E7B; font-weight: bold; margin-bottom: 0.5rem;">
                        ğŸ“ é…é€åœ°å€ï¼š${orderData.address}
                    </div>
                    <div style="color: #E76F51; font-size: 0.9rem;">
                        ğŸšš å…è´¹é…é€ | â° 30-60åˆ†é’Ÿé€è¾¾
                    </div>
                </div>
                
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: #333; margin-bottom: 1rem;">è¯·é€‰æ‹©æ”¯ä»˜æ–¹å¼ï¼š</h4>
                    
                    <div style="display: grid; gap: 1rem; margin-bottom: 1rem;">
                        <div class="payment-option" data-payment="paynow" style="border: 2px solid #ddd; border-radius: 10px; padding: 1rem; cursor: pointer; transition: all 0.3s ease;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 1.5rem;">ğŸ¦</span>
                                <div style="text-align: left; flex: 1;">
                                    <div style="font-weight: bold; color: #333;">PayNow</div>
                                    <div style="font-size: 0.9rem; color: #666;">æ–°åŠ å¡æœ¬åœ°å³æ—¶è½¬è´¦</div>
                                </div>
                                <div style="color: #28a745; font-weight: bold;">æ¨è</div>
                            </div>
                        </div>
                        
                        <div class="payment-option" data-payment="wechat" style="border: 2px solid #ddd; border-radius: 10px; padding: 1rem; cursor: pointer; transition: all 0.3s ease;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 1.5rem;">ğŸ’¬</span>
                                <div style="text-align: left; flex: 1;">
                                    <div style="font-weight: bold; color: #333;">å¾®ä¿¡æ”¯ä»˜</div>
                                    <div style="font-size: 0.9rem; color: #666;">WeChat Pay æ‰«ç æ”¯ä»˜</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="font-size: 0.9rem; color: #666; text-align: left;">
                        ğŸ’¡ <strong>æ”¯ä»˜è¯´æ˜ï¼š</strong><br>
                        â€¢ é€‰æ‹©æ”¯ä»˜æ–¹å¼åï¼Œæˆ‘ä»¬ä¼šæä¾›è¯¦ç»†çš„æ”¯ä»˜ä¿¡æ¯<br>
                        â€¢ ç¡®è®¤æ”¶åˆ°æ‚¨çš„æ”¯ä»˜åï¼Œç«‹å³å®‰æ’é…é€<br>
                        â€¢ å¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿WhatsAppè”ç³»æˆ‘ä»¬
                    </div>
                </div>
                
                <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1.5rem;">
                    <button id="confirmPaymentBtn" disabled style="background: #6B8E7B; color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 25px; cursor: pointer; font-weight: bold; opacity: 0.5;">
                        ç¡®è®¤æ”¯ä»˜æ–¹å¼
                    </button>
                    <button onclick="closePaymentModal()" style="background: #ccc; color: #333; border: none; padding: 0.8rem 1.5rem; border-radius: 25px; cursor: pointer;">
                        è¿”å›ä¿®æ”¹
                    </button>
                </div>
                
                <button onclick="closePaymentModal()" style="
                    position: absolute;
                    top: 15px;
                    right: 15px;
                    background: none;
                    border: none;
                    font-size: 1.5rem;
                    cursor: pointer;
                    color: #999;
                ">âœ•</button>
            `;
            
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // æ·»åŠ æ”¯ä»˜æ–¹å¼é€‰æ‹©äº¤äº’
            let selectedPayment = null;
            const paymentOptions = content.querySelectorAll('.payment-option');
            const confirmBtn = content.querySelector('#confirmPaymentBtn');
            
            paymentOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€
                    paymentOptions.forEach(opt => {
                        opt.style.borderColor = '#ddd';
                        opt.style.backgroundColor = 'white';
                    });
                    
                    // è®¾ç½®å½“å‰é€‰ä¸­
                    this.style.borderColor = '#6B8E7B';
                    this.style.backgroundColor = '#f0f8f0';
                    
                    selectedPayment = this.getAttribute('data-payment');
                    
                    // å¯ç”¨ç¡®è®¤æŒ‰é’®
                    confirmBtn.disabled = false;
                    confirmBtn.style.opacity = '1';
                    confirmBtn.style.cursor = 'pointer';
                });
            });
            
            // ç¡®è®¤æŒ‰é’®äº‹ä»¶
            confirmBtn.addEventListener('click', function() {
                if (selectedPayment) {
                    closePaymentModal();
                    processPayment(orderData, selectedPayment);
                }
            });
            
            // ç‚¹å‡»èƒŒæ™¯å…³é—­
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closePaymentModal();
                }
            });
        }
        
        // å¤„ç†æ”¯ä»˜æ–¹å¼é€‰æ‹©
        function processPayment(orderData, paymentMethod) {
            if (paymentMethod === 'paynow') {
                showPayNowDetails(orderData);
            } else if (paymentMethod === 'wechat') {
                showWeChatPayDetails(orderData);
            }
        }
        
        // æ˜¾ç¤ºPayNowæ”¯ä»˜è¯¦æƒ…
        function showPayNowDetails(orderData) {
            // å­˜å‚¨è®¢å•æ•°æ®åˆ°å…¨å±€å˜é‡
            currentPaymentData = orderData;
            
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                backdrop-filter: blur(5px);
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: white;
                padding: 2rem;
                border-radius: 20px;
                max-width: 450px;
                width: 90%;
                text-align: center;
                box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                position: relative;
            `;
            
            const totalAmount = parseFloat(orderData.productPrice.replace('S$', '')).toFixed(2);
            
            content.innerHTML = `
                <h3 style="color: #6B8E7B; margin-bottom: 1rem;">ğŸ¦ PayNow æ”¯ä»˜è¯¦æƒ…</h3>
                
                <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; margin-bottom: 1.5rem;">
                    <div style="font-size: 1.2rem; font-weight: bold; color: #E76F51; margin-bottom: 1rem;">
                        æ”¯ä»˜é‡‘é¢ï¼šS$${totalAmount}
                    </div>
                    
                    <div style="background: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                        <div style="font-weight: bold; margin-bottom: 0.5rem;">PayNow ID:</div>
                        <div style="font-size: 1.1rem; font-weight: bold; color: #666; background: #e9ecef; padding: 0.5rem; border-radius: 5px;">
                            [å¾…ç¡®è®¤]
                        </div>
                        <div style="font-size: 0.8rem; color: #666; margin-top: 0.5rem;">
                            ğŸ’¬ æˆ‘ä»¬ä¼šåœ¨WhatsAppä¸­æä¾›å…·ä½“çš„PayNowä¿¡æ¯
                        </div>
                    </div>
                    
                    <div style="background: white; padding: 1rem; border-radius: 8px;">
                        <div style="font-weight: bold; margin-bottom: 0.5rem;">æ”¶æ¬¾äººå§“å:</div>
                        <div style="font-size: 1rem; color: #666;">[å¾…ç¡®è®¤]</div>
                    </div>
                </div>
                
                <div style="background: #e8f5e8; padding: 1rem; border-radius: 10px; margin-bottom: 1.5rem; text-align: left;">
                    <h4 style="color: #6B8E7B; margin-bottom: 0.5rem;">ğŸ“± PayNowè½¬è´¦æ­¥éª¤ï¼š</h4>
                    <div style="font-size: 0.9rem; line-height: 1.6;">
                        1ï¸âƒ£ æˆ‘ä»¬ä¼šåœ¨WhatsAppä¸­æä¾›å…·ä½“PayNowä¿¡æ¯<br>
                        2ï¸âƒ£ è¾“å…¥é‡‘é¢: <strong>S$${totalAmount}</strong><br>
                        3ï¸âƒ£ åœ¨å¤‡æ³¨ä¸­å†™: <strong>è±†è±†è°·è®¢è´­</strong><br>
                        4ï¸âƒ£ ç¡®è®¤è½¬è´¦å¹¶æˆªå›¾
                    </div>
                </div>
                
                <div style="font-size: 0.9rem; color: #666; margin-bottom: 1.5rem;">
                    ğŸ’¡ ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œæˆ‘ä»¬ä¼šåœ¨WhatsAppä¸­æä¾›è¯¦ç»†çš„PayNowä¿¡æ¯
                </div>
                
                <div style="display: flex; gap: 1rem; justify-content: center;">
                    <button onclick="sendPayNowOrderToWhatsApp()" style="background: #25D366; color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 25px; cursor: pointer; font-weight: bold;">
                        ğŸ“± å‘é€è®¢å•åˆ°WhatsApp
                    </button>
                    <button onclick="closePaymentModal()" style="background: #ccc; color: #333; border: none; padding: 0.8rem 1.5rem; border-radius: 25px; cursor: pointer;">
                        å…³é—­
                    </button>
                </div>
                
                <button onclick="closePaymentModal()" style="
                    position: absolute;
                    top: 15px;
                    right: 15px;
                    background: none;
                    border: none;
                    font-size: 1.5rem;
                    cursor: pointer;
                    color: #999;
                ">âœ•</button>
            `;
            
            modal.appendChild(content);
            document.body.appendChild(modal);
        }
        
        // æ˜¾ç¤ºå¾®ä¿¡æ”¯ä»˜è¯¦æƒ…
        function showWeChatPayDetails(orderData) {
            // å­˜å‚¨è®¢å•æ•°æ®åˆ°å…¨å±€å˜é‡
            currentPaymentData = orderData;
            
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                backdrop-filter: blur(5px);
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: white;
                padding: 2rem;
                border-radius: 20px;
                max-width: 450px;
                width: 90%;
                text-align: center;
                box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                position: relative;
            `;
            
            const totalAmount = parseFloat(orderData.productPrice.replace('S$', '')).toFixed(2);
            
            content.innerHTML = `
                <h3 style="color: #6B8E7B; margin-bottom: 1rem;">ğŸ’¬ å¾®ä¿¡æ”¯ä»˜è¯¦æƒ…</h3>
                
                <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; margin-bottom: 1.5rem;">
                    <div style="font-size: 1.2rem; font-weight: bold; color: #E76F51; margin-bottom: 1rem;">
                        æ”¯ä»˜é‡‘é¢ï¼šS$${totalAmount}
                    </div>
                    
                    <div style="margin: 1.5rem 0;">
                        <img src="images/wechat-qr.jpg" 
                             style="width: 180px; height: 180px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);"
                             onerror="this.style.display='none'; document.getElementById('wechat-pay-error').style.display='block';">
                        
                        <div id="wechat-pay-error" style="display: none; padding: 2rem; background: #f0f0f0; border-radius: 10px;">
                            <p style="color: #666; margin: 0;">ğŸ“± å¾®ä¿¡æ”¯ä»˜äºŒç»´ç åŠ è½½ä¸­...</p>
                        </div>
                    </div>
                    
                    <div style="background: white; padding: 1rem; border-radius: 8px;">
                        <div style="font-weight: bold; margin-bottom: 0.5rem;">å¾®ä¿¡å·:</div>
                        <div style="font-size: 1.1rem; font-weight: bold; color: #333;">18565651233</div>
                        <button onclick="copyWeChatNumber()" style="background: #07C160; color: white; border: none; padding: 0.5rem 1rem; border-radius: 20px; margin-top: 0.5rem; cursor: pointer; font-size: 0.9rem;">
                            ğŸ“‹ å¤åˆ¶å¾®ä¿¡å·
                        </button>
                    </div>
                </div>
                
                <div style="background: #e8f5e8; padding: 1rem; border-radius: 10px; margin-bottom: 1.5rem; text-align: left;">
                    <h4 style="color: #6B8E7B; margin-bottom: 0.5rem;">ğŸ“± å¾®ä¿¡æ”¯ä»˜æ­¥éª¤ï¼š</h4>
                    <div style="font-size: 0.9rem; line-height: 1.6;">
                        1ï¸âƒ£ æ‰«æä¸Šæ–¹äºŒç»´ç æ·»åŠ å¾®ä¿¡å¥½å‹<br>
                        2ï¸âƒ£ å¤‡æ³¨ï¼š<strong>è±†è±†è°·æ”¯ä»˜</strong><br>
                        3ï¸âƒ£ é€šè¿‡å¾®ä¿¡è½¬è´¦: <strong>S$${totalAmount}</strong><br>
                        4ï¸âƒ£ æˆ–ç›´æ¥ä½¿ç”¨å¾®ä¿¡æ”¶æ¬¾ç æ”¯ä»˜<br>
                        5ï¸âƒ£ æˆªå›¾å‘é€ç¡®è®¤
                    </div>
                </div>
                
                <div style="font-size: 0.9rem; color: #666; margin-bottom: 1.5rem;">
                    ğŸ’¡ æ”¯ä»˜å®Œæˆåï¼Œè¯·å°†æˆªå›¾å‘é€è‡³WhatsAppç¡®è®¤è®¢å•
                </div>
                
                <div style="display: flex; gap: 1rem; justify-content: center;">
                    <button onclick="sendWeChatOrderToWhatsApp()" style="background: #25D366; color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 25px; cursor: pointer; font-weight: bold;">
                        ğŸ“± å‘é€è®¢å•åˆ°WhatsApp
                    </button>
                    <button onclick="closePaymentModal()" style="background: #ccc; color: #333; border: none; padding: 0.8rem 1.5rem; border-radius: 25px; cursor: pointer;">
                        å…³é—­
                    </button>
                </div>
                
                <button onclick="closePaymentModal()" style="
                    position: absolute;
                    top: 15px;
                    right: 15px;
                    background: none;
                    border: none;
                    font-size: 1.5rem;
                    cursor: pointer;
                    color: #999;
                ">âœ•</button>
            `;
            
            modal.appendChild(content);
            document.body.appendChild(modal);
        }
        
        // å‘é€PayNowè®¢å•åˆ°WhatsApp
        function sendPayNowOrderToWhatsApp() {
            console.log('PayNowæŒ‰é’®è¢«ç‚¹å‡»'); // è°ƒè¯•æ—¥å¿—
            
            if (!currentPaymentData) {
                alert('è®¢å•æ•°æ®æœªå‡†å¤‡å¥½ï¼Œè¯·å…ˆé€‰æ‹©æ”¯ä»˜æ–¹å¼ã€‚');
                return;
            }

            try {
                const message = `ğŸŒ±ã€è±†è±†è°·è®¢è´­ã€‘ä½ å¥½ï¼æˆ‘æƒ³è®¢è´­ï¼š${currentPaymentData.productName} ${currentPaymentData.productPrice}

ğŸ“ é…é€åœ°å€ï¼š${currentPaymentData.address}
ğŸšš å…è´¹é…é€æœåŠ¡

ğŸ’³ æ”¯ä»˜æ–¹å¼ï¼šPayNow
ğŸ’° æ”¯ä»˜é‡‘é¢ï¼š${currentPaymentData.productPrice}

è¯·æä¾›PayNowè½¬è´¦ä¿¡æ¯ï¼Œæˆ‘å®Œæˆè½¬è´¦åä¼šæˆªå›¾ç¡®è®¤ã€‚è°¢è°¢ï¼`;
                
                console.log('å‡†å¤‡å‘é€WhatsAppæ¶ˆæ¯'); // è°ƒè¯•æ—¥å¿—
                openWhatsAppChat(message);
                closePaymentModal();
                showOrderSuccess();
            } catch (error) {
                console.error('å‘é€è®¢å•å¤±è´¥:', error);
                alert('å‘é€è®¢å•æ—¶å‡ºç°é”™è¯¯ï¼Œè¯·é‡è¯•ã€‚');
            }
        }
        
        // å‘é€å¾®ä¿¡æ”¯ä»˜è®¢å•åˆ°WhatsApp
        function sendWeChatOrderToWhatsApp() {
            if (!currentPaymentData) {
                alert('è®¢å•æ•°æ®æœªå‡†å¤‡å¥½ï¼Œè¯·å…ˆé€‰æ‹©æ”¯ä»˜æ–¹å¼ã€‚');
                return;
            }

            const message = `ğŸŒ±ã€è±†è±†è°·è®¢è´­ã€‘ä½ å¥½ï¼æˆ‘æƒ³è®¢è´­ï¼š${currentPaymentData.productName} ${currentPaymentData.productPrice}

ğŸ“ é…é€åœ°å€ï¼š${currentPaymentData.address}
ğŸšš å…è´¹é…é€æœåŠ¡

ğŸ’³ æ”¯ä»˜æ–¹å¼ï¼šå¾®ä¿¡æ”¯ä»˜
ğŸ’° æ”¯ä»˜é‡‘é¢ï¼š${currentPaymentData.productPrice}
ğŸ’¬ å¾®ä¿¡å·ï¼š18565651233

æˆ‘å°†é€šè¿‡å¾®ä¿¡è½¬è´¦åæˆªå›¾ç¡®è®¤ã€‚è°¢è°¢ï¼`;
            
            openWhatsAppChat(message);
            closePaymentModal();
            showOrderSuccess();
        }
        
        // å…³é—­æ”¯ä»˜æ¨¡æ€æ¡†
        function closePaymentModal() {
            const modal = document.querySelector('div[style*="position: fixed"][style*="z-index: 10000"]');
            if (modal) {
                modal.remove();
            }
        }
        
        // æ˜¾ç¤ºè®¢å•æäº¤æˆåŠŸ
        function showOrderSuccess() {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: var(--primary-color);
                color: white;
                padding: 2rem;
                border-radius: 15px;
                box-shadow: 0 8px 25px rgba(0,0,0,0.3);
                z-index: 10001;
                text-align: center;
                min-width: 300px;
            `;
            
            toast.innerHTML = `
                <div style="font-size: 3rem; margin-bottom: 1rem;">âœ…</div>
                <h3 style="margin-bottom: 1rem;">è®¢å•æäº¤æˆåŠŸï¼</h3>
                <p style="margin: 0; opacity: 0.9;">æ‚¨çš„è®¢å•å·²å‘é€åˆ°WhatsApp<br>è¯·å®Œæˆæ”¯ä»˜åæˆªå›¾ç¡®è®¤</p>
            `;
            
            document.body.appendChild(toast);
            
            // 3ç§’åç§»é™¤
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 3000);
        }

        function showWeChatInfo() {
            // åˆ›å»ºä¸€ä¸ªæ›´ç¾è§‚çš„å¼¹çª—
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                backdrop-filter: blur(5px);
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: white;
                padding: 2rem;
                border-radius: 20px;
                max-width: 400px;
                width: 90%;
                text-align: center;
                box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                position: relative;
            `;
            
            content.innerHTML = `
                <h3 style="color: #6B8E7B; margin-bottom: 1rem;">ğŸ’¬ å¾®ä¿¡å’¨è¯¢ - è±†è±†è°·</h3>
                
                <div style="margin: 1.5rem 0;">
                    <img src="images/wechat-qr.jpg" 
                         style="width: 200px; height: 200px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);"
                         onerror="this.style.display='none'; document.getElementById('qr-error').style.display='block';">
                    
                    <div id="qr-error" style="display: none; padding: 2rem; background: #f0f0f0; border-radius: 10px; margin: 1rem 0;">
                        <p style="color: #666; margin: 0;">ğŸ“± å¾®ä¿¡äºŒç»´ç åŠ è½½ä¸­...</p>
                    </div>
                </div>
                
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
                    <p style="margin: 0; color: #333;"><strong>ğŸ“± å¾®ä¿¡å·ï¼š18565651233</strong></p>
                    <button onclick="copyWeChatNumber()" style="
                        background: #07C160;
                        color: white;
                        border: none;
                        padding: 0.5rem 1rem;
                        border-radius: 20px;
                        margin-top: 0.5rem;
                        cursor: pointer;
                        font-size: 0.9rem;
                    ">ğŸ“‹ å¤åˆ¶å¾®ä¿¡å·</button>
                </div>
                
                <div style="font-size: 0.9rem; color: #666; text-align: left;">
                    <p><strong>æ·»åŠ æ–¹å¼ï¼š</strong></p>
                    <p>1ï¸âƒ£ æ‰«æä¸Šæ–¹äºŒç»´ç </p>
                    <p>2ï¸âƒ£ æ‰‹åŠ¨æœç´¢å¾®ä¿¡å·ï¼š18565651233</p>
                    <p style="color: #E76F51;"><strong>ğŸ“ æ·»åŠ æ—¶è¯·å¤‡æ³¨ï¼šè±†è±†è°·å’¨è¯¢</strong></p>
                    
                    <hr style="margin: 1rem 0; border: none; border-top: 1px solid #eee;">
                    
                    <p>â° <strong>å¾®ä¿¡å›å¤æ—¶é—´ï¼š</strong></p>
                    <p>â€¢ å·¥ä½œæ—¥ï¼šæ™šä¸Šç»Ÿä¸€å›å¤</p>
                    <p>â€¢ å‘¨æœ«ï¼šä¸Šåˆ/ä¸‹åˆé›†ä¸­å›å¤</p>
                    <p>ğŸ”¥ æ€¥éœ€è®¢è´­å»ºè®®ä½¿ç”¨WhatsAppï¼ˆå³æ—¶å›å¤ï¼‰</p>
                    
                    <div style="background: #e8f5e8; padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                        <p style="margin: 0; color: #6B8E7B; font-weight: bold;">ğŸšš å…è´¹é…é€æœåŠ¡</p>
                        <p style="margin: 0.5rem 0 0 0; font-size: 0.85rem;">West Terra @ Bukit Batok (Block 447-453) & Le Questå…¬å¯“</p>
                    </div>
                </div>
                
                <button onclick="closeWeChatModal()" style="
                    position: absolute;
                    top: 15px;
                    right: 15px;
                    background: none;
                    border: none;
                    font-size: 1.5rem;
                    cursor: pointer;
                    color: #999;
                ">âœ•</button>
                
                <button onclick="closeWeChatModal()" style="
                    background: #6B8E7B;
                    color: white;
                    border: none;
                    padding: 0.8rem 2rem;
                    border-radius: 25px;
                    margin-top: 1rem;
                    cursor: pointer;
                    font-weight: bold;
                ">çŸ¥é“äº†</button>
            `;
            
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // ç‚¹å‡»èƒŒæ™¯å…³é—­
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeWeChatModal();
                }
            });
        }

        function copyWeChatNumber() {
            if (navigator.clipboard) {
                navigator.clipboard.writeText('18565651233').then(() => {
                    alert('âœ… å¾®ä¿¡å·å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼š18565651233');
                });
            } else {
                // é™çº§æ–¹æ¡ˆ
                const textArea = document.createElement('textarea');
                textArea.value = '18565651233';
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('âœ… å¾®ä¿¡å·å·²å¤åˆ¶ï¼š18565651233');
            }
        }

        // å…³é—­å¾®ä¿¡æ¨¡æ€æ¡†
        function closeWeChatModal() {
            const modal = document.querySelector('div[style*="position: fixed"][style*="z-index: 10000"]');
            if (modal) {
                modal.remove();
            }
        }

        // äº§å“å®šåˆ¶é€‰é¡¹åŠŸèƒ½
        let signatureOptions = {
            // çº¢ç²‰è±†è¯­
            'homeSignature': {
                size: null,
                temperature: null,
                sugar: null,
                price: 7.80,
                name: 'çº¢ç²‰è±†è¯­'
            },
            'signature': {
                size: null, 
                temperature: null,
                sugar: null,
                price: 7.80,
                name: 'çº¢ç²‰è±†è¯­'
            },
            // æ¡‚èŠ±åŒè±†å¥¶
            'homeGuihua': {
                size: null,
                temperature: null,
                sugar: null,
                price: 7.20,
                name: 'æ¡‚èŠ±åŒè±†å¥¶'
            },
            'guihua': {
                size: null,
                temperature: null,
                sugar: null,
                price: 7.20,
                name: 'æ¡‚èŠ±åŒè±†å¥¶'
            },
            // èŒ‰è‰åŒè±†è¯­
            'homeMoli': {
                size: null,
                temperature: null,
                sugar: null,
                price: 6.80,
                name: 'èŒ‰è‰åŒè±†è¯­'
            },
            'moli': {
                size: null,
                temperature: null,
                sugar: null,
                price: 6.80,
                name: 'èŒ‰è‰åŒè±†è¯­'
            },
            // æ´›ç¥å››å®é¥®
            'homeLuoshen': {
                size: null,
                temperature: null,
                sugar: null,
                price: 8.50,
                name: 'æ´›ç¥å››å®é¥®'
            },
            'luoshen': {
                size: null,
                temperature: null,
                sugar: null,
                price: 8.50,
                name: 'æ´›ç¥å››å®é¥®'
            }
        };

        // é€‰æ‹©æ¯å‹
        function selectSize(productId, size, price) {
            const clickedButton = event.target;
            const isCurrentlyActive = clickedButton.classList.contains('active');
            
            // è·å–äº§å“çš„åˆå§‹ä»·æ ¼æ˜ å°„
            const defaultPrices = {
                'homeSignature': 7.80, 'signature': 7.80,
                'homeGuihua': 7.20, 'guihua': 7.20,
                'homeMoli': 6.80, 'moli': 6.80,
                'homeLuoshen': 8.50, 'luoshen': 8.50
            };
            
            // å¦‚æœç‚¹å‡»çš„æ˜¯å·²é€‰ä¸­çš„é€‰é¡¹ï¼Œå–æ¶ˆé€‰æ‹©
            if (isCurrentlyActive) {
                clickedButton.classList.remove('active');
                signatureOptions[productId].size = null;
                signatureOptions[productId].price = defaultPrices[productId]; // ä½¿ç”¨å¯¹åº”äº§å“çš„é»˜è®¤ä»·æ ¼
                updatePrice(productId);
                return;
            }
            
            // é€‰æ‹©æ–°é€‰é¡¹
            signatureOptions[productId].size = size;
            signatureOptions[productId].price = price;
            
            // æ›´æ–°UI
            const sizeButtons = document.querySelectorAll(`[onclick*="selectSize('${productId}"]`);
            sizeButtons.forEach(btn => btn.classList.remove('active'));
            clickedButton.classList.add('active');
            
            // æ›´æ–°ä»·æ ¼æ˜¾ç¤º
            updatePrice(productId);
        }

        // é€‰æ‹©æ¸©åº¦
        function selectTemperature(productId, temperature) {
            const clickedButton = event.target;
            const isCurrentlyActive = clickedButton.classList.contains('active');
            
            // å¦‚æœç‚¹å‡»çš„æ˜¯å·²é€‰ä¸­çš„é€‰é¡¹ï¼Œå–æ¶ˆé€‰æ‹©
            if (isCurrentlyActive) {
                clickedButton.classList.remove('active');
                signatureOptions[productId].temperature = null;
                return;
            }
            
            // é€‰æ‹©æ–°é€‰é¡¹
            signatureOptions[productId].temperature = temperature;
            
            const tempButtons = document.querySelectorAll(`[onclick*="selectTemperature('${productId}"]`);
            tempButtons.forEach(btn => btn.classList.remove('active'));
            clickedButton.classList.add('active');
        }

        // é€‰æ‹©ç³–åˆ†
        function selectSugar(productId, sugar) {
            const clickedButton = event.target;
            const isCurrentlyActive = clickedButton.classList.contains('active');
            
            // å¦‚æœç‚¹å‡»çš„æ˜¯å·²é€‰ä¸­çš„é€‰é¡¹ï¼Œå–æ¶ˆé€‰æ‹©
            if (isCurrentlyActive) {
                clickedButton.classList.remove('active');
                signatureOptions[productId].sugar = null;
                return;
            }
            
            // é€‰æ‹©æ–°é€‰é¡¹
            signatureOptions[productId].sugar = sugar;
            
            const sugarButtons = document.querySelectorAll(`[onclick*="selectSugar('${productId}"]`);
            sugarButtons.forEach(btn => btn.classList.remove('active'));
            clickedButton.classList.add('active');
        }

        // æ›´æ–°ä»·æ ¼æ˜¾ç¤º
        function updatePrice(productId) {
            const priceElement = document.getElementById(productId + 'Price');
            if (priceElement) {
                priceElement.textContent = `S$${signatureOptions[productId].price.toFixed(2)}`;
            }
        }

        // è·å–äº§å“å®Œæ•´æè¿°
        function getSignatureDescription(productId) {
            const options = signatureOptions[productId];
            const sizeText = options.size === 'large' ? 'å¤§æ¯' : (options.size === 'small' ? 'å°æ¯' : 'æ ‡å‡†æ¯');
            const tempText = options.temperature === 'hot' ? 'çƒ­é¥®' : (options.temperature === 'cold' ? 'å†°é¥®' : 'å¸¸æ¸©');
            const sugarText = options.sugar === 'none' ? 'æ— ç³–' : (options.sugar === 'half' ? 'åŠç³–' : (options.sugar === 'standard' ? 'æ ‡å‡†ç³–' : 'ä¸åŠ ç³–'));
            
            return `${options.name} (${sizeText}/${tempText}/${sugarText})`;
        }

        // æ·»åŠ çº¢ç²‰è±†è¯­åˆ°è´­ç‰©è½¦
        function addSignatureToCart(productId) {
            const quantityInput = document.getElementById(productId + 'Quantity');
            const quantity = parseInt(quantityInput.value);
            const options = signatureOptions[productId];
            
            const productName = getSignatureDescription(productId);
            const price = `S$${options.price.toFixed(2)}`;
            
            addToCart(productName, price, 'ğŸŒ¹', quantityInput.id);
        }

        // ç›´æ¥è®¢è´­çº¢ç²‰è±†è¯­
        function orderSignatureProduct(productId) {
            const options = signatureOptions[productId];
            const productName = getSignatureDescription(productId);
            const price = `S$${options.price.toFixed(2)}`;
            
            startDeliveryVerification('whatsapp', productName, price);
        }

        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–è´­ç‰©è½¦
            initCart();
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            });

            document.querySelectorAll('.card, .product-card').forEach(el => {
                observer.observe(el);
            });

            // ç»‘å®šä¼ ç»ŸWhatsAppæŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆå¦‚æœè¿˜æœ‰çš„è¯ï¼‰
            document.querySelectorAll('.whatsapp-btn[data-message]').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const message = this.getAttribute('data-message');
                    openWhatsAppChat(message);
                });
            });
        });
    </script>
</body>
</html>
